<!DOCTYPE html>
<html lang="es" data-bs-theme="light">
  <head>
    <!--  Configuración básica -->
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Purple Store</title>
    <link rel="icon" type="image/svg+xml" href="./assets/icon/icon.svg" />
    <!-- SEO -->
    <meta
      name="description"
      content="Tienda e-commerce creada con Bootstrap y JavaScript. Productos en tarjetas, carrito interactivo, modo claro/oscuro y diseño violeta."
    />
    <meta
      name="keywords"
      content="ecommerce, tienda, bootstrap, javascript, purple store, tarjetas, carrito, responsive"
    />
    <meta name="author" content="Natalia García" />
    <!-- Estilos -->
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css"
      rel="stylesheet"
    />
    <link rel="stylesheet" href="./assets/css/styles.css" />
    <!-- Accesibilidad -->
    <meta name="color-scheme" content="light dark" />
    <!-- Seguridad -->
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta
      http-equiv="Content-Security-Policy"
      content="default-src 'self'; img-src 'self' https: data:; style-src 'self' 'unsafe-inline' https:; script-src 'self' https: 'unsafe-inline';"
    />
  </head>
  <body>

    <!-- NAVBAR-->
    <nav
      class="navbar navbar-expand-lg navbar-dark bg-indigo fixed-top shadow-sm"
    >
      <div class="container">
        <!-- Branding de la tienda -->
        <a class="navbar-brand fw-bold" href="index.html">
          <span class="logo-dot"></span> Purple Store
        </a>

        <!-- Links de navegación + botón carrito -->
        <div class="collapse navbar-collapse order-3 order-lg-1" id="mainNav">
          <ul class="navbar-nav me-auto mb-2 mb-lg-0">
            <li class="nav-item">
              <a class="nav-link active" href="index.html">Inicio</a>
            </li>
            <li class="nav-item">
              <a class="nav-link" href="#productos">Productos</a>
            </li>
            <li class="nav-item">
              <a class="nav-link" href="#info">Nosotros</a>
            </li>
            <li class="nav-item">
              <a class="nav-link" href="#contacto">Contacto</a>
            </li>
          </ul>

          <!-- Botón para abrir el carrito (offcanvas) con contador -->
        </div>

        <!-- Grupo derecha: hamburguesa + botón de tema -->
        <div class="d-flex align-items-center ms-auto order-2 order-lg-3">
          <!-- Botón hamburguesa: solo en mobile -->
          <button
            class="navbar-toggler me-2 d-lg-none"
            type="button"
            data-bs-toggle="collapse"
            data-bs-target="#mainNav"
            aria-controls="mainNav"
            aria-expanded="false"
            aria-label="Alternar navegación"
          >
            <span class="navbar-toggler-icon"></span>
          </button>

          <!-- Botón tema (siempre visible) -->
          <button
            id="themeToggle"
            class="btn btn-outline-light btn-sm d-flex align-items-center p-1 ms-1"
            type="button"
            title="Cambiar tema"
          >
            <span id="themeIcon"></span>
          </button>
        </div>
      </div>
    </nav>

    <!--HERO-->
  
    <header class="py-5 bg-gradient-hero text-center text-light">
    <br><br><br>
      <div class="container">
        <h1 class="display-5 fw-bold">Tu vitrina violeta</h1>
        <p class="lead mb-0">
          Bootstrap + JavaScript, con paleta morada y modo claro/oscuro
        </p>
      </div>
    </header>

    <!-- LISTADO DE PRODUCTOS-->
    <main id="productos" class="container my-5">
      <div class="d-flex justify-content-between align-items-center mb-3">
        <h2 class="h3 m-0">Productos</h2>

        <!-- Orden simple -->
        <div class="d-flex gap-2 align-items-center ms-5">
          <!-- Label visible solo en sm en adelante -->
          <label
            for="sortSelect"
            class="form-label m-0 small d-none d-sm-block"
          >
            Ordenar:
          </label>

          <select
            id="sortSelect"
            class="form-select form-select-sm sort-select"
            aria-label="Ordenar productos"
          >
            <option value="default">Predeterminado</option>
            <option value="price-asc">Precio: menor a mayor</option>
            <option value="price-desc">Precio: mayor a menor</option>
            <option value="name-asc">Nombre A → Z</option>
          </select>
        </div>
      </div>

      <!-- Contenedor donde JS inyecta las cards -->
      <div id="productGrid" class="row g-4">
        <!-- Las tarjetas se renderizan desde app.js -->
      </div>
    </main>

    <!--SECCIONES INFORMATIVAS (para navegar con links)-->
    <section id="info" class="container my-5">
      <h2 class="h4">Sobre la tienda</h2>
      <p class="mb-0">
        Lorem ipsum dolor sit amet consectetur adipisicing elit. Mollitia
        consectetur eum ipsam voluptatem similique, enim quos iure laudantium
        perspiciatis, at delectus reprehenderit illum laboriosam? Aliquid iusto
        cupiditate quas aut sapiente.
      </p>
    </section>

    <section id="contacto" class="container my-5">
      <h2 class="h4">Contacto</h2>
      <ul class="list-unstyled">
        <li>
          Email: <a href="mailto:hola@purplestore.cl">hola@purplestore.cl</a>
        </li>
        <li>Telefono: +56 9 1234 5678</li>
      </ul>
    </section>

    <!--OFFCANVAS (carrito) )-->
    <div
      class="offcanvas offcanvas-end"
      tabindex="-1"
      id="offcanvasCart"
      aria-labelledby="offcanvasCartLabel"
    >
      <div class="offcanvas-header">
        <h5 id="offcanvasCartLabel" class="offcanvas-title">Tu carro</h5>
        <button
          type="button"
          class="btn-close"
          data-bs-dismiss="offcanvas"
          aria-label="Cerrar"
        ></button>
      </div>
      <div class="offcanvas-body d-flex flex-column">
        <div id="cartItems" class="mb-3">
          <!-- Items del carro (JS) -->
        </div>

        <div class="mt-auto">
          <div class="d-flex justify-content-between align-items-center mb-2">
            <strong>Total</strong>
            <span id="cartTotal" class="fw-bold">$0</span>
          </div>
          <div class="d-grid gap-2">
            <a
              href="#productos"
              class="btn btn-outline-secondary"
              data-bs-dismiss="offcanvas"
              >Seguir comprando</a
            >
            <button class="btn btn-majorelle" id="checkoutBtn" type="button">
              Ir a pagar
            </button>
          </div>
        </div>
      </div>
    </div>

        <!-- Botón flotante del Carrito: SIEMPRE visible y por encima -->
    <button
      id="floatingCartBtn"
      class="btn btn-vodka position-fixed d-flex align-items-center justify-content-center shadow-lg"
      style="
        bottom: 20px;
        right: 20px;
        width: 60px;
        height: 60px;
        border-radius: 50%;
        z-index: 3000;
      "
      type="button"
      data-bs-toggle="offcanvas"
      data-bs-target="#offcanvasCart"
      aria-controls="offcanvasCart"
    >
      <svg
        xmlns="http://www.w3.org/2000/svg"
        fill="none"
        viewBox="0 0 24 24"
        stroke-width="1.5"
        stroke="currentColor"
        width="26"
        height="26"
        aria-hidden="true"
      >
        <path
          stroke-linecap="round"
          stroke-linejoin="round"
          d="M2.25 3h1.386c.51 0 .955.343 1.087.835l.383 1.437M7.5 14.25a3 3 0 0 0-3 3h15.75m-12.75-3h11.218
      c1.121-2.3 2.1-4.684 2.924-7.138a60.114 60.114 0 0 0-16.536-1.84M7.5 14.25 5.106 5.272M6
      20.25a.75.75 0 1 1-1.5 0 .75.75 0 0 1 1.5 0Zm12.75 0a.75.75 0 1 1-1.5 0 .75.75 0 0 1 1.5 0Z"
        />
      </svg>

      <!-- Contador -->
      <span
        id="cartCount"
        class="position-absolute top-0 start-100 translate-middle badge rounded-pill text-bg-dark"
        >0</span
      >
    </button>

    <!-- FOOTER-->
    <footer class="mt-5 py-4 bg-chinese text-light">
      <div class="container small">
        <div class="row g-3 align-items-center">
          <div class="col-md-6">
            <span id="year"></span> Purple Store con Bootstrap 5.3 y JavaScript.
          </div>
          <div class="col-md-6 text-md-end">
            BOOTCAMP DESARROLLO DE APLICACIONES FULL STACK PYTHON.
          </div>
        </div>
      </div>
    </footer>

    <!-- Bootstrap JS + Popper -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
    <script>
      document.addEventListener("DOMContentLoaded", function () {
        const cartBtn = document.getElementById("floatingCartBtn");

        if (!cartBtn) return;

        // Cuando se abre cualquier offcanvas:
        document.addEventListener("show.bs.offcanvas", function (event) {
          // Solo si es el del carro
          if (event.target.id === "offcanvasCart") {
            cartBtn.classList.add("d-none");
          }
        });

        // Cuando se termina de cerrar cualquier offcanvas:
        document.addEventListener("hidden.bs.offcanvas", function (event) {
          if (event.target.id === "offcanvasCart") {
            cartBtn.classList.remove("d-none");
          }
        });
      });
    </script>

    <!-- App JS (datos + lógica de carrito-tema + render) -->
    <script src="./assets/js/app.js"></script>
  </body>
</html>
